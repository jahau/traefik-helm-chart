suite: Dashboard configuration
tests:
  - it: should have the dashboard enabled by default at pod level
    asserts:
      - contains:
          path: spec.template.spec.containers[0].args
          content:
            --api.dashboard=true
        template: deployment.yaml
  - it: should have the dashboard disabled when specified via values
    set:
      dashboard:
        enable: false
    asserts:
      - contains:
          path: spec.template.spec.containers[0].args
          content:
            --api.dashboard=false
        template: deployment.yaml
  - it: should ONLY have the dashboard exposed via traefik entrypoint by default
    asserts:
      - equal:
          path: spec.entryPoints
          value:
            - traefik
        template: dashboard-hook-ingressroute.yaml
  - it: should NOT create IngressRoute for dashboard if no entrypoints are specified
    set:
      dashboard:
        ingressRoute: []
    asserts:
      - hasDocuments:
          count: 0
        template: dashboard-hook-ingressroute.yaml
